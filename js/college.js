function refresh(){fetch_all_college("1")}function logout(){window.localStorage.clear(),window.location.href=" index.php"}function resetHelpInLine(){$("span.help-inline").each(function(){$(this).text("")})}function validate(){resetHelpInLine(),$('input[type="text"]').each(function(){$(this).val($(this).val().trim())});var e=!1;return""==$("#txtCollegeCode").val()&&($("#txtCollegeCode").next("span").text("College Code is required."),e=!0),""==$("#txtCollegeName").val()&&($("#txtCollegeName").next("span").text("College Name is required."),e=!0),""==$("#txtCollegeDean").val()&&($("#txtCollegeDean").next("span").text("College Dean is required."),e=!0),1==e?(alert("Please input all the required fields correctly."),!1):!0}function save(){$("#btn-save").button("loading");var e=$("#txtCollegeID").val();if(""==e)if(1==validate()){var l=new Array;college=new Object,college.college_name=$("#txtCollegeName").val(),college.college_code=$("#txtCollegeCode").val(),college.college_dean=$("#txtCollegeDean").val(),college.inactive=$("#chkInActive").val(),l.push(college),$.ajax({url:"http://localhost/cmuvoting/API/index.php",async:!0,type:"POST",crossDomain:!0,dataType:"json",data:{command:"insert_college",data:l},success:function(e){var l=e;if(1==l.success)$("#btn-save").button("reset"),window.location.href="college-list.php";else if(l.success===!1)return $("#btn-save").button("reset"),void alert(l.error)},error:function(e){$("#btn-save").button("reset"),console.log("Error:"),console.log(e.responseText),console.log(e.message)}})}else $("#btn-save").button("reset");else if(1==validate()){var l=new Array;college=new Object,college.college_name=$("#txtCollegeName").val(),college.college_code=$("#txtCollegeCode").val(),college.college_dean=$("#txtCollegeDean").val(),college.inactive=$("#chkInActive").val(),l.push(college),$.ajax({url:"http://localhost/cmuvoting/API/index.php",async:!0,type:"POST",crossDomain:!0,dataType:"json",data:{command:"update_college",college_id:e,data:l},success:function(e){var l=e;if(1==l.success)$("#btn-save").button("reset"),window.location.href="college-list.php";else if(l.success===!1)return $("#btn-save").button("reset"),void alert(l.error)},error:function(e){$("#btn-save").button("reset"),console.log("Error:"),console.log(e.responseText),console.log(e.message)}})}else $("#btn-save").button("reset")}function fetch_all_college(e){$("#processing-modal").modal("show"),$("#tbl_college tbody > tr").remove(),$.ajax({url:"http://localhost/cmuvoting/API/index.php",async:!0,type:"POST",crossDomain:!0,dataType:"json",data:{command:"select_all_college",page:e},success:function(e){var l=e;if(l&&l.colleges.length>0){for(var t=0;t<l.colleges.length;t++){var o,a=l.colleges;o=0==a[t].InActive?"Active":"InActive";var n='<tr class="odd">                                    <td>'+a[t].CollegeName+"</td>                                    <td>"+a[t].CollegeCode+"</td>                                    <td>"+a[t].CollegeDean+"</td>                                    <td>"+o+'</td>                                    <td class=" ">                                      <div class="text-right">                                        <a class="edit-college-icon btn btn-success btn-xs" data-id="'+a[t].CollegeID+'">                                          <i class="icon-pencil"></i>                                        </a>                                        <a class="remove-college-icon btn btn-danger btn-xs" data-id="'+a[t].CollegeID+'">                                          <i class="icon-remove"></i>                                        </a>                                      </div>                                    </td>                                </tr>';$("#tbl_college tbody").append(n)}$("#pagination").html(l.pagination),$("#tbl_student").addClass("tablesorter");var s=!0;$("table").trigger("update",[s])}$("#processing-modal").modal("hide")},error:function(e){$("#btn-save").button("reset"),console.log("Error:"),console.log(e.responseText),console.log(e.message),$("#processing-modal").modal("hide")}})}function search_college(){var e=$("#searchValue").val();$.ajax({url:"http://localhost/cmuvoting/API/index.php",async:!0,type:"POST",crossDomain:!0,dataType:"json",data:{command:"search_college",value:e},success:function(e){var l=e;$("#tbl_college tbody > tr").remove();for(var t=0;t<l.colleges.length;t++){var o,a=l.colleges;o=0==a[t].InActive?"Active":"InActive";var n='<tr class="odd">                            <td>'+a[t].CollegeName+"</td>                            <td>"+a[t].CollegeCode+"</td>                            <td>"+a[t].CollegeDean+"</td>                            <td>"+o+'</td>                            <td class=" ">                              <div class="text-right">                                <a class="edit-college-icon btn btn-success btn-xs" data-id="'+a[t].CollegeID+'">                                  <i class="icon-pencil"></i>                                </a>                                <a class="remove-college-icon btn btn-danger btn-xs" data-id="'+a[t].CollegeID+'">                                  <i class="icon-remove"></i>                                </a>                              </div>                            </td>                        </tr>';$("#tbl_college tbody").append(n)}$("#tbl_student").addClass("tablesorter");var s=!0;$("table").trigger("update",[s])},error:function(e){$("#btn-save").button("reset"),console.log("Error:"),console.log(e.responseText),console.log(e.message)}})}function commandToClear(){$("#txtCollegeCode").val(""),$("#txtCollegeName").val(""),$("#txtCollegeDean").val("")}function privilege(e){1==e._Dashboard&&$("#LIST li").eq(0).removeClass("hidden"),1==e._UsersAccount&&$("#LIST li").eq(1).removeClass("hidden"),1==e._Student&&$("#LIST li").eq(2).removeClass("hidden"),1==e._PartyList&&$("#LIST li").eq(3).removeClass("hidden"),1==e._Candidates&&$("#LIST li").eq(4).removeClass("hidden"),1==e._ElectoralPosition&&$("#LIST li").eq(5).removeClass("hidden"),1==e._AcademicProgram&&$("#LIST li").eq(6).removeClass("hidden"),1==e._ElectionConfig&&$("#LIST li").eq(7).removeClass("hidden"),1==e._UsersAccount&&$("#LIST li").eq(8).removeClass("hidden")}$(document).ready(function(){var e=JSON.parse(window.localStorage.user||"{}");Object.keys(e).length<1&&(console.log("redirect to main"),window.location.href="index.php"),$("#current_user").html(e.FullName+" ("+e.GroupName+")"),privilege(e),fetch_all_college("1")}),$(document).on("click",".edit-college-icon",function(){var e=$(this).data("id");$.ajax({url:"http://localhost/cmuvoting/API/index.php",async:!0,type:"POST",data:{command:"get_college",college_id:e},success:function(e){var l=e;if(1==l.success)$("#txtCollegeName").val(l.college.CollegeName),$("#txtCollegeCode").val(l.college.CollegeCode),$("#txtCollegeDean").val(l.college.CollegeDean),$("#txtCollegeID").val(l.college.CollegeID),$("#chkInActive").val(l.college.InActive),$("#myModal").modal("show");else if(l.success===!1)return $("#myModal").modal("hide"),void alert(l.msg)}})}),$(document).on("click",".remove-college-icon",function(){if(confirm("Are you sure to delete this College?")){var e=$(this).data("id");$.ajax({url:"http://localhost/cmuvoting/API/index.php",async:!0,type:"POST",data:{command:"delete_college",college_id:e},success:function(e){var l=e;if(1==l.success)window.location.href="college-list.php";else if(l.success===!1)return void alert(l.msg)}})}}),$("#pagination").on("click",".page-numbers",function(){var e=$(this).attr("data-id");fetch_all_college(e)});
